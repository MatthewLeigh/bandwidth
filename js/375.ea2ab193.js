"use strict";(self["webpackChunkbandwidth_v3"]=self["webpackChunkbandwidth_v3"]||[]).push([[375],{1094:function(e,t,s){s.r(t),s.d(t,{default:function(){return ne}});var a=s(6768),r=s(4232),i=s(3892),n=s(3813);const o={class:"carousel-wrapper"},c={class:"carousel-icon-wrapper"},l={class:"title-wrapper"},d={key:0,class:"featured"},u={key:1,class:"muted"},v={class:"title"},h={class:"date"},p={class:"startTime muted"},k={key:0,class:"stage muted"},m={key:0,class:"description row"},f={class:"avatars row"},g={class:"links row mobile-columns"},y=["href"],w={class:"disclaimer"},L={class:"muted"},T=["href"];function b(e,t,s,b,E,I){const S=(0,a.g2)("ImageCarousel"),C=(0,a.g2)("TicketCards"),$=(0,a.g2)("EventAvatarCards"),D=(0,a.g2)("CommentsSection"),F=(0,a.g2)("RandomBanner");return(0,a.uX)(),(0,a.Wv)(n.I,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",o,[(0,a.bF)(S,{focusArray:e.focusArray},null,8,["focusArray"]),(0,a.Lk)("div",c,[(0,a.bF)(i.D,{class:"carousel-icon",icon:"mdi-share-variant",onClick:e.sharePage},null,8,["onClick"]),e.user?((0,a.uX)(),(0,a.Wv)(i.D,{key:0,class:"carousel-icon",style:(0,r.Tr)(e.isSaved?"color: var(--c-icon-favourite)":""),icon:e.iconType,onClick:e.iconMethod},null,8,["style","icon","onClick"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",l,[e.isFeatured?((0,a.uX)(),(0,a.CE)("p",d,"| Featured Event")):((0,a.uX)(),(0,a.CE)("p",u,"| Event")),(0,a.Lk)("h1",v,(0,r.v_)(e.eventTitle),1)]),(0,a.Lk)("table",null,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[t[1]||(t[1]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Date")],-1)),(0,a.Lk)("td",null,[(0,a.Lk)("span",h,(0,r.v_)(e.eventDate),1),(0,a.Lk)("span",p," | "+(0,r.v_)(e.eventStartTime),1)])]),(0,a.Lk)("tr",null,[t[2]||(t[2]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Location")],-1)),(0,a.Lk)("td",null,[(0,a.Lk)("span",{onClick:t[0]||(t[0]=t=>e.goTo("venue",e.venueFocusId)),class:"clickable"},(0,r.v_)(e.venueTitle),1),e.stageTitle?((0,a.uX)(),(0,a.CE)("span",k," | "+(0,r.v_)(e.stageTitle),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("tr",null,[t[3]||(t[3]=(0,a.Lk)("td",null,[(0,a.Lk)("strong",null,"Price")],-1)),(0,a.Lk)("td",null,[(0,a.bF)(C,{eventId:e.focusId,ticketSaleUrl:e.ticketSaleUrl},null,8,["eventId","ticketSaleUrl"])])])])]),e.eventDescription?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("p",null,(0,r.v_)(e.eventDescription),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",f,[t[4]||(t[4]=(0,a.Lk)("h2",{class:"mobile-only set-times"},"Set Times",-1)),(0,a.bF)($,{eventId:e.focusId},null,8,["eventId"])]),(0,a.Lk)("div",g,[(0,a.Lk)("a",{href:e.ticketSaleUrl,class:"button"},"Get Tickets",8,y),t[8]||(t[8]=(0,a.Lk)("div",{class:"spacer"},null,-1)),(0,a.Lk)("div",w,[t[7]||(t[7]=(0,a.Lk)("p",{class:"asterisk muted"},"*",-1)),(0,a.Lk)("p",L,[t[5]||(t[5]=(0,a.eW)(" This event may be 18+. Information presented on this page may be false or outdated. Always check with the ")),(0,a.Lk)("a",{href:e.originalPostUrl,target:"_blank",class:"clickable"},"official listing",8,T),t[6]||(t[6]=(0,a.eW)(" before purchasing tickets for any event. "))])])]),(0,a.bF)(D,{focus:e.focus},null,8,["focus"]),(0,a.bF)(F)])),_:1})}s(1454);var E=s(4312),I=s(1840),S=s(7933);const C={class:"wrapper"},$={key:0},D={key:1,class:"card-wrapper"},F={key:0,class:"spacer"},_=["href"],P={class:"type"},A={class:"price"};function U(e,t,s,i,n,o){return(0,a.uX)(),(0,a.CE)("div",C,[e.isError||!e.isLoading&&0===e.ticketPrices.length?((0,a.uX)(),(0,a.CE)("p",$," Ticket price unknown. ")):((0,a.uX)(),(0,a.CE)("p",D,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.ticketPrices,((s,i)=>((0,a.uX)(),(0,a.CE)("span",{key:i},[0!==i?((0,a.uX)(),(0,a.CE)("span",F,"|")):(0,a.Q3)("",!0),(0,a.Lk)("a",{class:"card clickable",href:e.ticketSaleUrl,target:"_blank"},[(0,a.Lk)("span",P,(0,r.v_)(s.ticketType),1),t[0]||(t[0]=(0,a.Lk)("span",{class:"colon"},": ",-1)),(0,a.Lk)("span",A,(0,r.v_)(e.formatPrice(s.price)),1)],8,_)])))),128))]))])}var X=s(5793),j=(0,a.pM)({name:"TicketCards",data:()=>({ticketPrices:[],isLoading:!0,isError:!1}),props:{eventId:{type:Number,required:!0},ticketSaleUrl:{type:String,required:!0}},methods:{formatPrice(e){return 0===e?"Free":`$${e}`}},async mounted(){try{const e=await fetch(`${X.g}/ticket-prices-for-event/${this.eventId}`),t=await e.json();this.ticketPrices=t.map((e=>({ticketType:e.TicketType,price:parseFloat(e.Price)})))}catch(e){console.error("Error fetching ticket prices:",e),this.isError=!0}finally{this.isLoading=!1}}}),B=s(1241);const V=(0,B.A)(j,[["render",U],["__scopeId","data-v-16aa91ac"]]);var R=V,W=s(7498),M=s(697),Q=s(1606),N=s(5832),O=s(5126);const q={class:"wrapper"},K={key:0,class:"spacer"},x={key:1,class:"img-placeholder"};function G(e,t,s,i,n,o){return(0,a.uX)(),(0,a.CE)("div",q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.avatarCardDetails,((t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"card-wrapper"},[0!==s?((0,a.uX)(),(0,a.CE)("div",K)):(0,a.Q3)("",!0),(0,a.bF)(W.J,{class:"card",flat:"",onClick:s=>e.goTo(t.focus.type,t.focus.id,s)},{default:(0,a.k6)((()=>[t.hasImgError?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("span",null,(0,r.v_)(t.title.substring(0,1)),1)])):((0,a.uX)(),(0,a.Wv)(O.y,{key:0,src:t.imgUrl,alt:t.title,cover:"",height:"40",width:"40",style:{"border-radius":"50%"},onError:t=>e.onImageError(s)},null,8,["src","alt","onError"])),(0,a.bF)(M.O,null,{default:(0,a.k6)((()=>[(0,a.bF)(Q.r,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(t.title),1)])),_:2},1024),(0,a.bF)(N.Z,null,{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,r.v_)(e.getDescriptor(t.setListPosition)),1),(0,a.Lk)("span",null,(0,r.v_)(e.formatStartTime(t.startTime,t.setListPosition)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])}var H=s(529),J=(0,a.pM)({name:"EventAvatarCards",setup(){const{goTo:e}=(0,H.c)();return{goTo:e}},props:{eventId:{type:Number,required:!0}},data(){return{avatarCardDetails:[],isLoading:!0,isError:!1}},methods:{getDescriptor(e){const t=this.avatarCardDetails.length-1;switch(e){case t:return"Headliner";case-1:return"Venue";default:return"Support"}},formatStartTime(e,t){if(!e)return"";const s=e.substring(0,2),a=parseInt(s)%12||12,r=e.substring(3,5),i=parseInt(s)>=12?"pm":"am",n=-1===t?"Doors at ":"";return` | ${n}${a}:${r}${i}`},onImageError(e){this.avatarCardDetails[e].hasImgError=!0}},async mounted(){try{const e=await fetch(`${X.g}/event-avatar-card-artist-details/${this.eventId}`),t=await e.json(),s=t.map((e=>({imgUrl:e.URL,title:e.Title,startTime:e.PerformanceStartTime,setListPosition:e.SetListPosition,focus:new E.B(e.ArtistID,I.d.Artist)}))),a=await fetch(`${X.g}/event-avatar-card-venue-details/${this.eventId}`),r=await a.json(),i=r.map((e=>({imgUrl:e.URL,title:e.Title,startTime:e.StartTime,setListPosition:-1,focus:new E.B(e.VenueID,I.d.Venue)})));s.sort(((e,t)=>t.setListPosition-e.setListPosition)),this.avatarCardDetails=[...s,...i]}catch(e){console.error("Error fetching event avatar card details:",e),this.isError=!0}finally{this.isLoading=!1}}});const Z=(0,B.A)(J,[["render",G],["__scopeId","data-v-7fe62fc8"]]);var z=Z,Y=s(6705),ee=s(6703),te=s(657),se=s(926),ae=s(5704),re=(0,a.pM)({name:"EventFocusView",setup(){const{goTo:e}=(0,H.c)(),t=(0,se.B)(),s=(0,ae.e)(),{getUser:a}=(0,te.bP)(t);return{goTo:e,sessionStore:t,snackbar:s,user:a}},components:{ImageCarousel:S.A,TicketCards:R,EventAvatarCards:z,RandomBanner:Y.A,CommentsSection:ee.A},data(){return{focusId:Number(this.$route.params.id),focus:new E.B(Number(this.$route.params.id),I.d.Event),focusArray:[],eventTitle:"",eventDescription:"",isFeatured:!1,eventDate:"",eventStartTime:"",venueFocusId:0,venueTitle:"",stageTitle:"",originalPostUrl:"",ticketSaleUrl:"",isSaved:!1}},methods:{formatDate(e){return new Date(e).toLocaleDateString("en-AU",{weekday:"short",year:"numeric",month:"short",day:"numeric"})},formatTime(e){const t=e.substring(0,2),s=parseInt(t)%12||12,a=e.substring(3,5),r=parseInt(t)>=12?"pm":"am";return`${s}:${a}${r}`},async postIsSavedEvent(){try{const e=await fetch(`${X.g}/post/event/is-saved/${this.user.userId}/${this.focus.id}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to update favorite status.");this.snackbar.showSnackbar("Event added to saved events!"),this.isSaved=!this.isSaved}catch(e){console.error("Error marking event as favorite:",e)}},async deleteIsSavedEvent(){try{const e=await fetch(`${X.g}/delete/event/is-saved/${this.user.userId}/${this.focus.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to delete favorite status.");this.snackbar.showSnackbar("Event removed from saved events."),this.isSaved=!this.isSaved}catch(e){console.error("Error deleting event from favorites:",e)}},iconMethod(){this.isSaved?this.deleteIsSavedEvent():this.postIsSavedEvent()},async sharePage(){try{await navigator.clipboard.writeText(window.location.href),this.snackbar.showSnackbar("Address copied to clipboard")}catch(e){console.error("Failed to copy address: ",e),this.snackbar.showSnackbar("Failed to copy address to clipboard")}}},computed:{iconType(){return this.isSaved?"mdi-bookmark":"mdi-bookmark-outline"}},async mounted(){try{const e=await fetch(`${X.g}/event-image-ids/${this.focusId}`),t=await e.json(),{VenueID:s,ArtistIDs:a}=t[0];if(this.focusArray=[new E.B(this.focusId,I.d.Event),...a.split(",").map((e=>new E.B(e,I.d.Artist))),new E.B(s,I.d.Venue)],this.user){const e=await fetch(`${X.g}/get/event/is-saved/${this.user.userId}/${this.focusId}`),t=await e.json();this.isSaved=t[0].isSaved}const r=await fetch(`${X.g}/focus-event-details/${this.focusId}`),i=await r.json(),n=i[0];if(this.eventTitle=n.Title,this.eventDescription=n.Description,this.isFeatured=n.Featured,this.eventDate=this.formatDate(n.Date),this.eventStartTime=this.formatTime(n.StartTime),this.venueFocusId=n.VenueID,this.venueTitle=n.VenueTitle,this.stageTitle=n.StageTitle,this.originalPostUrl=n.OriginalPostURL,this.ticketSaleUrl=n.TicketSaleURL,this.user){const e=await fetch(`${X.g}/post/user-recently-viewed-event/${this.user.userId}/${this.focusId}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to update recently viewed events.")}}catch(e){console.error("Error fetching data:",e)}}});const ie=(0,B.A)(re,[["render",b],["__scopeId","data-v-5c718ab4"]]);var ne=ie}}]);
//# sourceMappingURL=375.ea2ab193.js.map
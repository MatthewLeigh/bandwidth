"use strict";(self["webpackChunkbandwidth_v3"]=self["webpackChunkbandwidth_v3"]||[]).push([[253],{5297:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var s=a(6768),r=a(3813);function l(e,t,a,l,o,i){const n=(0,s.g2)("LoginForm"),u=(0,s.g2)("SignUpForm");return(0,s.uX)(),(0,s.Wv)(r.I,null,{default:(0,s.k6)((()=>["login"===e.currentForm?((0,s.uX)(),(0,s.Wv)(n,{key:0,onToggleCurrentForm:e.toggleCurrentForm},null,8,["onToggleCurrentForm"])):((0,s.uX)(),(0,s.Wv)(u,{key:1,onToggleCurrentForm:e.toggleCurrentForm},null,8,["onToggleCurrentForm"]))])),_:1})}var o=a(5130),i=a(3892),n=a(1560),u=a(9669),c=a(5728);const m={class:"form-wrapper"},d={class:"form-filler"},h={class:"form-buttons"};function b(e,t,a,r,l,b){return(0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("div",d,[(0,s.bF)(u.w,{"aria-hidden":"true"},{default:(0,s.k6)((()=>t[2]||(t[2]=[(0,s.eW)("mdi-account-circle")]))),_:1}),t[4]||(t[4]=(0,s.Lk)("p",{id:"signup-prompt"},"Don't have an account yet?",-1)),(0,s.bF)(i.D,{flat:"",onClick:e.toggleCurrentForm,"aria-labelledby":"signup-prompt"},{default:(0,s.k6)((()=>t[3]||(t[3]=[(0,s.eW)("Create Account")]))),_:1},8,["onClick"])]),(0,s.bF)(n.n,{onSubmit:(0,o.D$)(e.submitForm,["prevent"])},{default:(0,s.k6)((()=>[t[8]||(t[8]=(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:"form-title"},"Welcome Back!"),(0,s.Lk)("p",{class:"form-description"},"Please login to access your saved events.")],-1)),(0,s.Lk)("fieldset",null,[t[5]||(t[5]=(0,s.Lk)("legend",{class:"sr-only","aria-label":"Login Form"},"Login Form",-1)),(0,s.bF)(c.W,{modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.email=t),label:"Email",type:"email",required:"",autocomplete:"email","aria-label":"Email","aria-required":"true"},null,8,["modelValue"]),(0,s.bF)(c.W,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),label:"Password",type:"password",required:"",autocomplete:"current-password","aria-label":"Password","aria-required":"true"},null,8,["modelValue"])]),(0,s.Lk)("div",h,[(0,s.bF)(i.D,{class:"clear-button",onClick:e.clearForm,"aria-label":"Clear Form Button",flat:""},{default:(0,s.k6)((()=>t[6]||(t[6]=[(0,s.eW)(" Clear ")]))),_:1},8,["onClick"]),(0,s.bF)(i.D,{class:"submit-button",onClick:e.submitForm,"aria-label":"Submit Form Button",flat:""},{default:(0,s.k6)((()=>t[7]||(t[7]=[(0,s.eW)(" Sign In ")]))),_:1},8,["onClick"])])])),_:1},8,["onSubmit"])])}var f=a(5793),p=a(657),g=a(926),w=a(529),k=a(5704),F=(0,s.pM)({name:"LoginForm",setup(){const e=(0,g.B)(),{getUser:t}=(0,p.bP)(e),{goTo:a}=(0,w.c)(),s=(0,k.e)();return{user:t,sessionStore:e,goTo:a,snackbar:s}},data(){return{email:"",password:""}},methods:{clearForm(){this.email="",this.password=""},async submitForm(){try{const e=await fetch(`${f.g}/get/login/${this.email}/${this.password}`);if(200===e.status){const t=await e.json();this.sessionStore.login({userId:t[0].UserID}),this.snackbar.showSnackbar("Login Successful"),this.goTo("home")}else 404===e.status?this.snackbar.showSnackbar("Email or Password is incorrect"):this.snackbar.showSnackbar("Login Unsuccessful")}catch(e){this.snackbar.showSnackbar("Login Unsuccessful")}},toggleCurrentForm(){this.$emit("toggleCurrentForm")}}}),C=a(1241);const y=(0,C.A)(F,[["render",b]]);var S=y,v=a(105);const L={class:"form-wrapper"},V={class:"form-buttons"},P={class:"form-filler"};function q(e,t,a,r,l,m){return(0,s.uX)(),(0,s.CE)("div",L,[(0,s.bF)(n.n,{ref:"form","validate-on":"submit",onSubmit:(0,o.D$)(e.submit,["prevent"])},{default:(0,s.k6)((()=>[t[11]||(t[11]=(0,s.Lk)("div",null,[(0,s.Lk)("h1",{class:"form-title"},"Welcome!"),(0,s.Lk)("p",{class:"form-description"},"Sign up to unlock the guides full potential.")],-1)),(0,s.Lk)("fieldset",null,[t[8]||(t[8]=(0,s.Lk)("legend",{class:"sr-only","aria-label":"Sign Up Form"},"Sign Up Form",-1)),(0,s.bF)(c.W,{modelValue:e.firstName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.firstName=t),label:"First Name",type:"text",rules:e.firstNameRules,"auto-complete":"given-name","aria-label":"First Name","aria-required":"true",required:""},null,8,["modelValue","rules"]),(0,s.bF)(c.W,{modelValue:e.lastName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.lastName=t),label:"Last Name",type:"text",rules:e.lastNameRules,"auto-complete":"family-name","aria-label":"Last Name","aria-required":"true",required:""},null,8,["modelValue","rules"]),(0,s.bF)(v.d4,{modelValue:e.selectedCountry,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.selectedCountry=t),t[3]||(t[3]=t=>e.fetchStates(e.selectedCountry))],items:e.countries,label:"Country",clearable:"",required:"",rules:e.countryRules,"aria-label":"Country","aria-required":"true"},null,8,["modelValue","items","rules"]),(0,s.bF)(v.d4,{modelValue:e.selectedState,"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedState=t),items:e.states,label:"State",clearable:"",required:"",rules:e.stateRules,disabled:!e.selectedCountry,"aria-label":"State","aria-required":"true"},null,8,["modelValue","items","rules","disabled"]),(0,s.bF)(c.W,{modelValue:e.email,"onUpdate:modelValue":t[5]||(t[5]=t=>e.email=t),label:"Email",type:"email",rules:e.emailRules,required:"","aria-label":"Email","aria-required":"true",autocomplete:"email"},null,8,["modelValue","rules"]),(0,s.bF)(c.W,{modelValue:e.password,"onUpdate:modelValue":t[6]||(t[6]=t=>e.password=t),label:"Password",type:"password",rules:e.passwordRules,required:"","aria-label":"Password","aria-required":"true"},null,8,["modelValue","rules"]),(0,s.bF)(c.W,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[7]||(t[7]=t=>e.confirmPassword=t),label:"Confirm Password",type:"password",rules:e.confirmPasswordRules,required:"","aria-label":"Confirm Password","aria-required":"true"},null,8,["modelValue","rules"])]),(0,s.Lk)("div",V,[(0,s.bF)(i.D,{class:"clear-button",onClick:e.clear,flat:""},{default:(0,s.k6)((()=>t[9]||(t[9]=[(0,s.eW)("Clear")]))),_:1},8,["onClick"]),(0,s.bF)(i.D,{class:"submit-button",onClick:e.submit,flat:""},{default:(0,s.k6)((()=>t[10]||(t[10]=[(0,s.eW)("Sign Up")]))),_:1},8,["onClick"])])])),_:1},8,["onSubmit"]),(0,s.Lk)("div",P,[(0,s.bF)(u.w,{"aria-hidden":"true"},{default:(0,s.k6)((()=>t[12]||(t[12]=[(0,s.eW)("mdi-account-circle")]))),_:1}),t[14]||(t[14]=(0,s.Lk)("p",{id:"login-prompt"},"Already have an account?",-1)),(0,s.bF)(i.D,{flat:"",onClick:e.toggleCurrentForm,"aria-labelledby":"login-prompt"},{default:(0,s.k6)((()=>t[13]||(t[13]=[(0,s.eW)("Log In")]))),_:1},8,["onClick"])])])}a(1454);var N=(0,s.pM)({name:"SignUpForm",setup(){const e=(0,g.B)(),{getUser:t}=(0,p.bP)(e),{goTo:a}=(0,w.c)(),s=(0,k.e)();return{user:t,sessionStore:e,goTo:a,snackbar:s}},data(){return{countries:[],states:[],selectedCountry:"Australia",selectedState:"",firstName:"",lastName:"",email:"",password:"",confirmPassword:"",firstNameRules:[e=>e&&e.trim().length>0||"First name is required",e=>e&&e.trim().length<=50||"First name must be 50 characters or less",e=>/^[a-zA-Z\s]*$/.test(e)||"First name must contain only letters and spaces"],lastNameRules:[e=>e&&e.trim().length>0||"Last name is required",e=>e&&e.trim().length<=50||"Last name must be 50 characters or less",e=>/^[a-zA-Z\s]*$/.test(e)||"Last name must contain only letters and spaces"],countryRules:[e=>e&&e.trim().length>0||"Country is required"],stateRules:[e=>e&&e.trim().length>0||"State is required"],emailRules:[e=>e&&e.trim().length>0||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"],passwordRules:[e=>e&&e.trim().length>0||"Password is required",e=>e&&e.trim().length>=8||"Password must be at least 8 characters"],confirmPasswordRules:[e=>e&&e.trim().length>0||"Confirm password is required",()=>this.doesConfirmPasswordMatch()||"Passwords do not match"]}},methods:{toggleCurrentForm(){this.$emit("toggleCurrentForm")},async fetchCountries(){try{const e=await fetch("https://restcountries.com/v3.1/all?fields=name"),t=await e.json();if(!e.ok)throw new Error("Failed to fetch countries");this.countries=t.map((e=>e.name.common)).sort()}catch(e){console.error("Error fetching countries:",e)}},async fetchStates(e){if(this.states=[],"Australia"!=e&&(this.selectedState=""),e)try{const t=await fetch("https://countriesnow.space/api/v0.1/countries/states",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({country:e})}),a=await t.json();if(!t.ok)throw new Error("Failed to fetch states");this.states=a.data.states.map((e=>e.name)).sort(),"Australia"===e&&(this.selectedState="Victoria")}catch(t){console.error(`Error fetching states for ${e}:`,t),this.states=[]}},clear(){this.firstName="",this.lastName="",this.selectedCountry="",this.selectedState="",this.email="",this.password="",this.confirmPassword=""},async submit(e){e.preventDefault();const{valid:t}=await this.$refs.form.validate();if(!t)return;const a=`${f.g}/post/signup`,s={firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password,country:this.selectedCountry,state:this.selectedState};try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(200===e.status){const t=await e.json();this.sessionStore.login({userId:t.userId}),this.snackbar.showSnackbar("Account created successfully!"),this.goTo("home")}else this.snackbar.showSnackbar("Failed to create account")}catch(r){this.snackbar.showSnackbar("Failed to create account")}},doesConfirmPasswordMatch(){return this.password===this.confirmPassword}},mounted(){this.fetchCountries(),this.fetchStates(this.selectedCountry),this.selectedState="Victoria"}});const U=(0,C.A)(N,[["render",q]]);var W=U,R=(0,s.pM)({name:"LoginView",setup(){const e=(0,g.B)(),{getUser:t}=(0,p.bP)(e);return{user:t,sessionStore:e}},components:{LoginForm:S,SignUpForm:W},data(){return{currentForm:"login"}},methods:{handleLogin(){this.sessionStore.login({userId:"1"})},handleLogout(){this.sessionStore.logout()},toggleCurrentForm(){this.currentForm="login"===this.currentForm?"signup":"login"}}});const D=(0,C.A)(R,[["render",l]]);var E=D},1560:function(e,t,a){a.d(t,{n:function(){return d}});var s=a(6768),r=a(9262),l=a(3651),o=a(1950),i=a(144),n=a(4587),u=a(1247),c=a(4600);const m=(0,n.j)({...(0,r.u)(),...(0,l.pE)()},"VForm"),d=(0,u.RW)()({name:"VForm",props:m(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:a,emit:r}=t;const n=(0,l.DG)(e),u=(0,i.KR)();function m(e){e.preventDefault(),n.reset()}function d(e){const t=e,a=n.validate();t.then=a.then.bind(a),t.catch=a.catch.bind(a),t.finally=a.finally.bind(a),r("submit",t),t.defaultPrevented||a.then((e=>{let{valid:t}=e;t&&u.value?.submit()})),t.preventDefault()}return(0,c.C)((()=>(0,s.bF)("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:m,onSubmit:d},[a.default?.(n)]))),(0,o.O)(n,u)}})}}]);
//# sourceMappingURL=253.58949dbf.js.map
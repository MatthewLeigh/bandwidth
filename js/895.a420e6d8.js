"use strict";(self["webpackChunkbandwidth_v3"]=self["webpackChunkbandwidth_v3"]||[]).push([[895],{8897:function(e,t,n){function s(e){const t=new Date,n=t.getTime()-new Date(e).getTime(),s=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);if(s<60)return`${s}min ago`;if(i<24)return`${i}h ago`;if(o<7)return`${o}d ago`;const a={year:"numeric",month:"short",day:"numeric"};return new Date(e).toLocaleDateString(void 0,a)}function i(e){const t={month:"short",day:"numeric",weekday:"long"};return new Date(e).toLocaleDateString(void 0,t)}function o(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${s}`}function a(e){const t=new Date(e);return o(t)}function r(e){if(e instanceof Date){const t=o(e);return i(t)}{const t=a(e);return i(t)}}function m(){const e=new Date;return o(e)}n.d(t,{HR:function(){return r},OS:function(){return i},XI:function(){return s},um:function(){return m}})},6703:function(e,t,n){n.d(t,{A:function(){return V}});var s=n(6768),i=n(4232),o=n(5130),a=n(3892),r=n(1560),m=n(5728);const c={class:"title-wrapper"},l={key:0,class:"pagination"},d=["disabled"],u=["disabled"],h={key:0,class:"comments-wrapper"};function g(e,t,n,g,p,f){const k=(0,s.g2)("DividerBar"),v=(0,s.g2)("CommentRow");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",c,[(0,s.bF)(k,{text:"Comments"}),e.comments.length>e.commentsPerPage?((0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.prevPage&&e.prevPage(...t)),disabled:1===e.currentPage,style:(0,i.Tr)({color:1===e.currentPage?"var(--c-text-muted)":"inherit"})}," Previous ",12,d),(0,s.Lk)("span",null,"Page "+(0,i.v_)(e.currentPage)+" of "+(0,i.v_)(e.totalPages),1),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.nextPage&&e.nextPage(...t)),disabled:e.currentPage===e.totalPages,style:(0,i.Tr)({color:e.currentPage===e.totalPages?"var(--c-text-muted)":"inherit"})}," Next ",12,u)])):(0,s.Q3)("",!0)]),e.comments.length>0?((0,s.uX)(),(0,s.CE)("div",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.paginatedComments,((t,n)=>((0,s.uX)(),(0,s.Wv)(v,{key:n,comment:t,focus:e.focus,onCommentUpdated:e.handleCommentUpdated},null,8,["comment","focus","onCommentUpdated"])))),128))])):(0,s.Q3)("",!0),(0,s.bF)(r.n,{ref:"form","validate-on":"submit",onSubmit:(0,o.D$)(e.submit,["prevent"])},{default:(0,s.k6)((()=>[(0,s.bF)(m.W,{class:"comment-input",modelValue:e.newComment,"onUpdate:modelValue":t[2]||(t[2]=t=>e.newComment=t),counter:512,rules:e.newCommentRules,label:e.commentLabel,required:"",disabled:!e.user,"aria-label":"Comment Input","aria-required":"true"},null,8,["modelValue","rules","label","disabled"]),(0,s.bF)(a.D,{class:"submit-button",loading:e.isSubmitting,text:"Submit",type:"submit",block:"",disabled:!e.isFormValid||!e.user,"aria-label":"Submit Comment Button","aria-required":"true"},null,8,["loading","disabled"])])),_:1},8,["onSubmit"])],64)}n(1454);var p=n(1114);class f{constructor(e,t,n,s,i,o,a,r,m){(0,p.A)(this,"commentId",void 0),(0,p.A)(this,"userId",void 0),(0,p.A)(this,"userFirstName",void 0),(0,p.A)(this,"userLastName",void 0),(0,p.A)(this,"userImg",void 0),(0,p.A)(this,"dateTime",void 0),(0,p.A)(this,"comment",void 0),(0,p.A)(this,"likes",void 0),(0,p.A)(this,"isEdited",void 0),this.commentId=e,this.userId=t,this.userFirstName=n,this.userLastName=s,this.userImg=i,this.dateTime=o,this.comment=a,this.likes=r,this.isEdited=m}}var k=n(5793),v=n(7498),y=n(9669);const b={class:"icon-wrapper"},C=["src"],w={class:"text-wrapper"},L={class:"top-row"},$={class:"name"},I={class:"dateTime"},U={key:0,class:"edited-flag"},P={key:0,class:"comment"},E={key:2,class:"bottom-row"},S={key:3,class:"bottom-row right-align"};function D(e,t,n,a,r,m){return(0,s.uX)(),(0,s.Wv)(v.J,{flat:"",class:"wrapper"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",b,[(0,s.Lk)("img",{src:e.comment.userImg,alt:"User Icon",class:"icon"},null,8,C)]),(0,s.Lk)("div",w,[(0,s.Lk)("div",L,[(0,s.Lk)("p",null,[(0,s.Lk)("span",$,(0,i.v_)(e.comment.userFirstName)+" "+(0,i.v_)(e.comment.userLastName),1),(0,s.Lk)("span",I,(0,i.v_)(e.formattedDateTime),1),e.comment.isEdited?((0,s.uX)(),(0,s.CE)("span",U,"(edited)")):(0,s.Q3)("",!0)])]),e.isEditing?(0,s.bo)(((0,s.uX)(),(0,s.CE)("textarea",{key:1,"onUpdate:modelValue":t[0]||(t[0]=t=>e.editedComment=t),class:"comment-input",ref:"textarea",onInput:t[1]||(t[1]=(...t)=>e.autoResize&&e.autoResize(...t)),onKeydown:[t[2]||(t[2]=(0,o.jR)((0,o.D$)(((...t)=>e.updateComment&&e.updateComment(...t)),["exact","prevent"]),["enter"])),t[3]||(t[3]=(0,o.jR)((0,o.D$)(((...t)=>e.cancelUpdateComment&&e.cancelUpdateComment(...t)),["exact","prevent"]),["esc"]))]},null,544)),[[o.Jo,e.editedComment]]):((0,s.uX)(),(0,s.CE)("p",P,(0,i.v_)(e.comment.comment),1)),e.isEditing?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",{onClick:t[4]||(t[4]=(...t)=>e.likeComment&&e.likeComment(...t)),class:(0,i.C4)(["likes","btn",e.isLikedByUser?"isLikedByUser":""])},[(0,s.bF)(y.w,{class:(0,i.C4)([{wiggle:e.isLikedByUserClicked}]),icon:"mdi-thumb-up"},null,8,["class"]),(0,s.Lk)("span",null,(0,i.v_)(e.comment.likes),1)],2),e.isWrittenByUser?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"edit btn",onClick:t[5]||(t[5]=(...t)=>e.editComment&&e.editComment(...t))},[(0,s.bF)(y.w,{icon:"mdi-square-edit-outline"}),t[9]||(t[9]=(0,s.Lk)("span",null,"edit",-1))])):(0,s.Q3)("",!0)])),e.isEditing?((0,s.uX)(),(0,s.CE)("div",S,[e.isWrittenByUser?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"delete btn",onClick:t[6]||(t[6]=(...t)=>e.deleteComment&&e.deleteComment(...t))},[(0,s.bF)(y.w,{icon:"mdi-delete"}),t[10]||(t[10]=(0,s.Lk)("span",null,"delete",-1))])):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:"cancel btn",onClick:t[7]||(t[7]=(...t)=>e.cancelUpdateComment&&e.cancelUpdateComment(...t))},[(0,s.bF)(y.w,{icon:"mdi-cancel"}),t[11]||(t[11]=(0,s.Lk)("span",null,"cancel",-1))]),(0,s.Lk)("div",{class:"cancel btn",onClick:t[8]||(t[8]=(...t)=>e.updateComment&&e.updateComment(...t))},[(0,s.bF)(y.w,{icon:"mdi-content-save-edit"}),t[12]||(t[12]=(0,s.Lk)("span",null,"update",-1))])])):(0,s.Q3)("",!0)])])),_:1})}var F=n(657),x=n(926),T=n(8897),X=n(5704),_=(0,s.pM)({name:"CommentRow",setup(){const e=(0,x.B)(),{getUser:t}=(0,F.bP)(e),n=(0,X.e)();return{sessionStore:e,user:t,snackbar:n}},props:{comment:{type:Object,required:!0},focus:{type:Object,required:!0}},data(){return{isEditing:!1,isLikedByUser:!1,isLikedByUserClicked:!1,editedComment:this.comment.comment,now:new Date,intervalId:null}},computed:{isWrittenByUser(){return this.user?.userId==this.comment.userId},formattedDateTime(){return(0,T.XI)(this.comment.dateTime)}},methods:{formatDateTimeRelative:T.XI,async deleteComment(){try{const e=await fetch(`${k.g}/delete/${this.focus.type}/comment/${this.comment.commentId}`,{method:"DELETE"}),t=e.status;if(200!==t)throw new Error("Failed to delete comment");this.snackbar.showSnackbar("Commented successfully deleted!"),this.$emit("commentUpdated")}catch(e){this.snackbar.showSnackbar("Unable to delete comment."),console.error(e)}finally{this.isEditing=!1}},cancelUpdateComment(){this.editedComment=this.comment.comment,this.isEditing=!1},async updateComment(){try{const e={comment:this.editedComment},t=await fetch(`${k.g}/put/${this.focus.type}/comment/${this.comment.commentId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=t.status;if(200!==n)throw new Error("Failed to delete comment");this.snackbar.showSnackbar("Commented successfully updated"),this.$emit("commentUpdated")}catch(e){this.snackbar.showSnackbar("Unable to update comment."),console.error(e)}finally{this.isEditing=!1}},async likeComment(){if(this.isLikedByUserClicked=!0,setTimeout((()=>{this.isLikedByUserClicked=!1}),500),!this.user)return void this.snackbar.showSnackbar("Please log in or sign up to like comments");const e=this.isLikedByUser?"delete":"post",t=this.isLikedByUser?"unlike-comment":"like-comment";try{const n=await fetch(`${k.g}/${e}/${this.focus.type}/${t}/${this.comment.commentId}/${this.user?.userId}`,{method:e.toUpperCase()}),s=n.status;if(200!==s)throw"post"===e?new Error("Failed to like comment"):new Error("Failed to unlike comment");this.isLikedByUser=!this.isLikedByUser,this.$emit("commentUpdated")}catch(n){console.error(n)}},async isUserLikedComment(){const e=await fetch(`${k.g}/get/${this.focus.type}/is-user-liked-comment/${this.comment.commentId}/${this.user?.userId}`),t=await e.json();this.isLikedByUser=t[0].isUserLikedComment},autoResize(){this.$nextTick((()=>{const e=this.$refs.textarea;e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")}))},editComment(){this.isEditing=!0,this.$nextTick((()=>{this.autoResize(),this.$nextTick((()=>{const e=this.$refs.textarea;e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))}))}))}},watch:{comment:{handler(e){this.editedComment=e.comment},immediate:!0}},mounted(){this.isUserLikedComment(),this.intervalId=setInterval((()=>{this.now=new Date}),6e4)},beforeUnmount(){this.intervalId&&clearInterval(this.intervalId)}}),B=n(1241);const A=(0,B.A)(_,[["render",D],["__scopeId","data-v-406b0588"]]);var R=A,j=n(1510),W=(0,s.pM)({name:"CommentSection",setup(){const e=(0,x.B)(),{getUser:t}=(0,F.bP)(e);return{sessionStore:e,user:t}},props:{focus:{type:Object,required:!0}},components:{DividerBar:j.A,CommentRow:R},data(){return{comments:[],currentPage:1,commentsPerPage:3,newComment:"",newCommentRules:[e=>e&&e.trim().length>0||"Comment cannot be empty",e=>e?.length<=512||"Comment must be less than 512 characters"],isSubmitting:!1}},computed:{totalPages(){return Math.ceil(this.comments.length/this.commentsPerPage)},paginatedComments(){const e=(this.currentPage-1)*this.commentsPerPage,t=e+this.commentsPerPage;return this.comments.slice(e,t)},commentLabel(){return this.user?this.comments.length>0?"Join the conversation":"Be the first to leave a comment!":"Please log in or sign up to leave a comment"},isFormValid(){return this.newComment.trim().length>0&&this.newComment.length<=512}},methods:{nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},handleCommentUpdated(){this.getComments()},async submit(e){e.preventDefault();const{valid:t}=await this.$refs.form.validate();if(!t)return;this.isSubmitting=!0;const n=`${k.g}/post/${this.focus.type}/comment/${this.focus.id}/${this.user?.userId}`,s={comment:this.newComment};try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok){const t=await e.text();throw new Error(`Failed to post comment: ${t}`)}this.newComment="",this.getComments()}catch(i){console.log("Unsuccessful attempt to add comment to database: ",i),alert("Failed to post comment: "+i)}finally{this.isSubmitting=!1}},async getComments(){try{const e=await fetch(`${k.g}/get/${this.focus.type}/comments/${this.focus.id}`),t=await e.json();this.comments=t.map((e=>new f(e.CommentID,e.UserID,e.FirstName,e.LastName,e.UserImg,e.DateTime,e.Comment,e.Likes,e.IsEdited))),await this.$nextTick()}catch(e){console.log("Error fetching comments:",e)}}},mounted(){this.getComments()}});const N=(0,B.A)(W,[["render",g],["__scopeId","data-v-77c5f66c"]]);var V=N},7933:function(e,t,n){n.d(t,{A:function(){return y}});var s=n(6768),i=n(4232),o=n(266),a=n(8272),r=n(5981),m=n(3813),c=n(5126),l=n(6106),d=n(1146);const u={class:"wrapper"};function h(e,t,n,h,g,p){return(0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(m.I,{class:"d-flex justify-center align-center container",fluid:"","no-gutters":"",width:"100%",style:{"background-color":"var(--c-bg-secondary)"}},{default:(0,s.k6)((()=>[e.isLoading?((0,s.uX)(),(0,s.Wv)(l.x,{key:0,indeterminate:"",color:"primary",class:"my-5 mx-auto"})):e.isError?((0,s.uX)(),(0,s.Wv)(o.l,{key:1,class:"mx-5",dense:"",outlined:"",color:"error",icon:"mdi-alert",width:"100%","max-width":"600"},{default:(0,s.k6)((()=>t[0]||(t[0]=[(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"There was an error loading some banners.")],-1),(0,s.Lk)("p",null,"Please try again later.",-1)]))),_:1})):((0,s.uX)(),(0,s.Wv)(a.n,{key:2,width:"100%",height:"100%","hide-delimiter-background":"","show-arrows":!(e.ImageDetails.length<=1)&&"hover"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.ImageDetails,((e,t)=>((0,s.uX)(),(0,s.Wv)(r.q,{key:t},{default:(0,s.k6)((()=>[(0,s.bF)(d.i,{class:"fill-height d-flex align-center justify-center",style:{"background-color":"var(--c-bg-secondary)"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"blur",style:(0,i.Tr)({backgroundImage:"url("+e.imgUrl+")",backgroundSize:"cover",backgroundPosition:"center center"})},null,4),(0,s.bF)(c.y,{src:e.imgUrl,alt:"carousel image",elevation:"20"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["show-arrows"]))])),_:1})])}n(4114);var g=n(360),p=n(5793),f=(0,s.pM)({name:"ImageCarousel",props:{focusArray:{type:Array,required:!0}},data(){return{ImageDetails:[],isLoading:!0,isError:!1}},async mounted(){try{while(0===this.$props.focusArray.length)await new Promise((e=>setTimeout(e,10)));for(const t of this.$props.focusArray)try{let e=await fetch(`${p.g}/single-${t.type}-image-urls/${t.id}`);const n=await e.json();for(const s of n.urls)await this.validateImageUrl(s,t)}catch(e){console.error(`Error fetching images for ${t.type} with ID ${t.id}:`,e)}}catch(e){console.error("Error fetching data:",e),this.isError=!0}finally{this.isLoading=!1}},methods:{async validateImageUrl(e,t){return new Promise((n=>{const s=new Image;s.src=e,s.onload=()=>{this.ImageDetails.push(new g.g(e,t)),n()},s.onerror=()=>{n()}}))}}}),k=n(1241);const v=(0,k.A)(f,[["render",h],["__scopeId","data-v-29e66207"]]);var y=v},1560:function(e,t,n){n.d(t,{n:function(){return u}});var s=n(6768),i=n(9262),o=n(3651),a=n(1950),r=n(144),m=n(4587),c=n(1247),l=n(4600);const d=(0,m.j)({...(0,i.u)(),...(0,o.pE)()},"VForm"),u=(0,c.RW)()({name:"VForm",props:d(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const m=(0,o.DG)(e),c=(0,r.KR)();function d(e){e.preventDefault(),m.reset()}function u(e){const t=e,n=m.validate();t.then=n.then.bind(n),t.catch=n.catch.bind(n),t.finally=n.finally.bind(n),i("submit",t),t.defaultPrevented||n.then((e=>{let{valid:t}=e;t&&c.value?.submit()})),t.preventDefault()}return(0,l.C)((()=>(0,s.bF)("form",{ref:c,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:d,onSubmit:u},[n.default?.(m)]))),(0,a.O)(m,c)}})},1146:function(e,t,n){n.d(t,{i:function(){return y},G:function(){return v}});var s=n(6768),i=n(9923),o=n(2886),a=n(9262),r=n(2542),m=n(7018),c=n(9788),l=n(8184),d=n(3240),u=n(4663),h=n(7664),g=n(144),p=n(4587),f=n(1247),k=n(4600);const v=(0,p.j)({color:String,...(0,i.r)(),...(0,a.u)(),...(0,r.X)(),...(0,m.s)(),...(0,c.M)(),...(0,l.S)(),...(0,d.S)(),...(0,u.X)(),...(0,h.yx)()},"VSheet"),y=(0,f.RW)()({name:"VSheet",props:v(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=(0,h.NX)(e),{backgroundColorClasses:u,backgroundColorStyles:p}=(0,o.z6)((0,g.lW)(e,"color")),{borderClasses:f}=(0,i.M)(e),{dimensionStyles:v}=(0,r.S)(e),{elevationClasses:y}=(0,m.j)(e),{locationStyles:b}=(0,c.z)(e),{positionClasses:C}=(0,l.J)(e),{roundedClasses:w}=(0,d.v)(e);return(0,k.C)((()=>(0,s.bF)(e.tag,{class:["v-sheet",a.value,u.value,f.value,y.value,C.value,w.value,e.class],style:[p.value,v.value,b.value,e.style]},n))),{}}})}}]);
//# sourceMappingURL=895.a420e6d8.js.map